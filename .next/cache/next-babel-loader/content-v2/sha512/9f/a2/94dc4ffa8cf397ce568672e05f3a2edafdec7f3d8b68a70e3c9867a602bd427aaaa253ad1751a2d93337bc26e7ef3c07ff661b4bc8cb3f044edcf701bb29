{"ast":null,"code":"import _taggedTemplateLiteral from \"/Users/ainuratoktomusheva/Documents/Seytech2021/whatsapp-clone/node_modules/next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/Users/ainuratoktomusheva/Documents/Seytech2021/whatsapp-clone/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  position: sticky;\\n  top: 0;\\n  background-color: white;\\n  z-index: 1;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 15px;\\n  height: 80px;\\n  border-bottom: 1px solid whitesmoke;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  outline-width: 0;\\n  border: none;\\n  flex: 1;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  padding: 5px;\\n  border-radius: 2px;\\n  padding: 20px;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  &&& {\\n    border-top: 1px solid whitesmoke;\\n    border-bottom: 1px solid whitesmoke;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  cursor: pointer;\\n\\n  :hover {\\n    opacity: 0.8;\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  flex: 0.45;\\n  border-right: 1px solid whitesmoke;\\n  height: 100vh;\\n  min-width: 300px;\\n  max-width: 350px;\\n  overflow-y: scroll;\\n\\n  ::-webkit-scrollbar {\\n    display: none;\\n  }\\n\\n  -ms-overflow-style: none; /* IE and Edge */\\n  scrollbar-width: none; /* Firefox */\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Avatar, Button, IconButton } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, db } from \"../firebase\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport styled from \"styled-components\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Chat from \"./Chat\";\nimport { useCollection } from \"react-firebase-hooks/firestore\";\nimport * as EmailValidator from \"email-validator\";\n\nfunction Sidebar() {\n  var _useAuthState = useAuthState(auth),\n      _useAuthState2 = _slicedToArray(_useAuthState, 1),\n      user = _useAuthState2[0];\n\n  var userChatsRef = db.collection(\"chats\").where(\"users\", \"array-contains\", user.email);\n\n  var _useCollection = useCollection(userChatsRef),\n      _useCollection2 = _slicedToArray(_useCollection, 2),\n      chatsSnapshot = _useCollection2[0],\n      loading = _useCollection2[1];\n\n  var createChat = function createChat() {\n    var input = prompt(\"Please enter an email address for the user you wish to chat with\");\n    if (!input) return;\n\n    if (EmailValidator.validate(input) && !chatAlreadyExist(input) && input !== user.email) {\n      db.collection(\"chats\").add({\n        users: [user.email, input]\n      });\n    }\n  };\n\n  var chatAlreadyExist = function chatAlreadyExist(recipientEmail) {\n    return !!(chatsSnapshot !== null && chatsSnapshot !== void 0 && chatsSnapshot.docs.find(function (chat) {\n      var _chat$data$users$find;\n\n      return ((_chat$data$users$find = chat.data().users.find(function (user) {\n        return user === recipientEmail;\n      })) === null || _chat$data$users$find === void 0 ? void 0 : _chat$data$users$find.length) > 0;\n    }));\n  };\n\n  return /*#__PURE__*/_jsxs(Container, {\n    children: [/*#__PURE__*/_jsxs(Header, {\n      children: [/*#__PURE__*/_jsx(UserAvatar, {\n        onClick: function onClick() {\n          return auth.signOut();\n        },\n        src: user.photoURL\n      }), /*#__PURE__*/_jsxs(IconsContainer, {\n        children: [/*#__PURE__*/_jsx(IconButton, {\n          children: /*#__PURE__*/_jsx(ChatIcon, {})\n        }), /*#__PURE__*/_jsx(IconButton, {\n          children: /*#__PURE__*/_jsx(MoreVertIcon, {})\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(Search, {\n      children: [/*#__PURE__*/_jsx(SearchIcon, {}), /*#__PURE__*/_jsx(SearchInput, {\n        placeholder: \"Search in chats\",\n        type: \"text\"\n      })]\n    }), /*#__PURE__*/_jsx(SidebarButton, {\n      onClick: createChat,\n      children: \"Start a new chat\"\n    }), chatsSnapshot === null || chatsSnapshot === void 0 ? void 0 : chatsSnapshot.docs.map(function (chat) {\n      return /*#__PURE__*/_jsx(Chat, {\n        id: chat.id,\n        users: chat.data().users\n      }, chat.id);\n    })]\n  });\n}\n\nexport default Sidebar;\nvar Container = styled.div(_templateObject());\nvar UserAvatar = styled(Avatar)(_templateObject2());\nvar SidebarButton = styled(Button)(_templateObject3());\nvar Search = styled.div(_templateObject4());\nvar SearchInput = styled.input(_templateObject5());\nvar Header = styled.div(_templateObject6());\nvar IconsContainer = styled.div(_templateObject7());","map":null,"metadata":{},"sourceType":"module"}